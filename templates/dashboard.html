<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Flamenco Manager {{.Version}}</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/toastr/toastr.min.css">
    <link rel='stylesheet' href='/static/dashboard.css'>


    <script src='/static/vuejs/vue{{if ne .Config.Mode "develop"}}.min{{end}}.js'></script>
    <script src="/static/jquery.min.js"></script>
    <script src="/static/toastr/toastr.min.js"></script>
    <script src="/static/bootstrap/js/bootstrap.min.js" async></script>
    <script src="/static/clipboard.min.js" async></script>
    <script src="/static/imagewatch.js" async></script>

    {{ .VueTemplates }}
</head>
<body>
<div class="container theme-showcase" role="main" id='vue_app'>

    <header class='pageheader'><h1><img src='/static/flamenco.png' alt='Flamenco logo'> Flamenco Manager
        <span id='runmode'>{{if ne .Config.Mode "production"}}({{.Config.Mode}} mode){{end}}</span>
        <span id='managerversion'>{{ .Version}}</span>
    </h1></header>
    <section class="row">
        <div class='col-md-5'>
            <div class="card">
                <div class="card-header" id='statusheading'>
                    <h3 class="card-title">Status</h3>
                    <button id='downloadkick' class='btn btn-sm btn-outline-light'>Kick task downloader</button>
                </div>
                <div class="card-body">
                    <status id='status'
                        v-bind:serverinfo="serverinfo"
                        v-bind:idle_workers="idle_workers"
                        v-bind:errormsg="errormsg">
                    </status>
                </div>
            </div>
        </div>
        <div class='col-md-7'>
            <div class="card">
                <div class="card-header"><h3 class="card-title">Last rendered image</h3></div>
                <div class="card-body imageholder">
                    <a href='/latest-image'>
                    <img id='last_rendered_image'
                         class='small-last-rendered-image'
                         alt='Last-rendered image'
                         src='/static/latest-image.jpg'>
                     </a>
                </div>
            </div>
        </div>
    </section>

    <section class="row table-responsive">
        <action-bar
            v-bind:workers="current_workers"
            v-bind:selected_worker_ids="selected_worker_ids"
        ></action-bar>
        <table class="table table-condensed table-striped">
            <thead>
                <tr>
                    <th>Select &amp; Act</th>
                    <th>Nickname</th>
                    <th>Status</th>
                    <th>Cur/last Task</th>
                    <th>Task Log</th>
                    <th>Last Seen</th>
                    <th>ID</th>
                    <th>Address</th>
                    <th>Software</th>
                </tr>
            </thead>
            <tbody id='workers'>
                <tr is="worker-row"
                    v-for="worker in current_workers"
                    v-bind:key="worker._id"
                    v-bind:worker="worker"
                    v-bind:selected_worker_ids="selected_worker_ids"
                    @worker-selected="onWorkerSelected"
                    ></tr>
            </tbody>
        </table>
    </section>
</div>
<script src="/static/dashboard.js"></script>
</body>
</html>
